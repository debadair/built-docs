<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>How to write a Logstash output plugin
        | Logstash Reference [7.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Logstash Reference [7.3]" /><link rel="up" href="contributing-to-logstash.html" title="Contributing to Logstash" /><link rel="prev" href="filter-new-plugin.html" title="How to write a Logstash filter plugin" /><link rel="next" href="plugin-doc.html" title="Documenting your plugin" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Logstash/Reference/7.3" /><meta name="DC.subject" content="Logstash" /><meta name="DC.identifier" content="7.3" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Logstash Reference
      [7.3]
    </a></span> » <span class="breadcrumb-link"><a href="contributing-to-logstash.html">Contributing to Logstash</a></span> » <span class="breadcrumb-node">How to write a Logstash output plugin</span></div><div class="navheader"><span class="prev"><a href="filter-new-plugin.html">
              « 
              How to write a Logstash filter plugin</a>
           
        </span><span class="next">
           
          <a href="plugin-doc.html">Documenting your plugin
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="output-new-plugin"></a>How to write a Logstash output plugin<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>To develop a new output for Logstash, you build a self-contained Ruby gem
whose source code lives in its own GitHub repository. The Ruby gem can then be
hosted and shared on RubyGems.org. You can use the example output
implementation as a starting point. (If you’re unfamiliar with
Ruby, you can find an excellent quickstart guide at
<a class="ulink" href="https://www.ruby-lang.org/en/documentation/quickstart/" target="_top">https://www.ruby-lang.org/en/documentation/quickstart/</a>.)</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_get_started_4"></a>Get started<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Let’s step through creating an output plugin using the <a class="ulink" href="https://github.com/logstash-plugins/logstash-output-example/" target="_top">example output plugin</a>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_create_a_github_repo_for_your_new_plugin_4"></a>Create a GitHub repo for your new plugin<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Each Logstash plugin lives in its own GitHub repository. To create a new repository for your plugin:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Log in to GitHub.
</li><li class="listitem">
Click the <span class="strong strong"><strong>Repositories</strong></span> tab. You’ll see a list of other repositories you’ve forked or contributed to.
</li><li class="listitem">
Click the green <span class="strong strong"><strong>New</strong></span> button in the upper right.
</li><li class="listitem"><p class="simpara">
Specify the following settings for your new repo:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Repository name</strong></span> — a unique name of the form <code class="literal">logstash-output-pluginname</code>.
</li><li class="listitem">
<span class="strong strong"><strong>Public or Private</strong></span> — your choice, but the repository must be Public if you want to submit it as an official plugin.
</li><li class="listitem">
<span class="strong strong"><strong>Initialize this repository with a README</strong></span> — enables you to immediately clone the repository to your computer.
</li></ul></div></li><li class="listitem">
Click <span class="strong strong"><strong>Create Repository</strong></span>.
</li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_the_plugin_generator_tool_4"></a>Use the plugin generator tool<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>You can now create your own Logstash plugin in seconds! The <code class="literal">generate</code> subcommand of <code class="literal">bin/logstash-plugin</code> creates the foundation
for a new Logstash plugin with templatized files. It creates the correct directory structure, gemspec files, and dependencies so you
can start adding custom code to process data with Logstash.</p><p>For more information, see <a class="xref" href="plugin-generator.html" title="Generating Plugins">Generating Plugins</a></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_copy_the_output_code"></a>Copy the output code<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Alternatively, you can use the examples repo we host on github.com</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
<span class="strong strong"><strong>Clone your plugin.</strong></span> Replace <code class="literal">GITUSERNAME</code> with your github username, and
<code class="literal">MYPLUGINNAME</code> with your plugin name.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
<code class="literal">git clone https://github.com/GITUSERNAME/logstash-</code><code class="literal">output-MYPLUGINNAME.git</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
alternately, via ssh: <code class="literal">git clone git@github.com:GITUSERNAME/logstash</code><code class="literal">-output-MYPLUGINNAME.git</code>
</li></ul></div></li><li class="listitem">
<code class="literal">cd logstash-output-MYPLUGINNAME</code>
</li></ul></div></li><li class="listitem"><p class="simpara">
</p><p class="simpara">You don’t want to include the example .git directory or its contents, so delete
it before you copy the example.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">cd /tmp</code>
</li><li class="listitem">
<code class="literal">git clone https://github.com/logstash-plugins/logstash</code><code class="literal">-output-example.git</code>
</li><li class="listitem">
<code class="literal">cd logstash-output-example</code>
</li><li class="listitem">
<code class="literal">rm -rf .git</code>
</li><li class="listitem">
<code class="literal">cp -R * /path/to/logstash-output-mypluginname/</code>
</li></ul></div></li><li class="listitem"><p class="simpara">
<span class="strong strong"><strong>Rename the following files to match the name of your plugin.</strong></span>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">logstash-output-example.gemspec</code>
</li><li class="listitem">
<code class="literal">example.rb</code>
</li><li class="listitem"><p class="simpara">
<code class="literal">example_spec.rb</code>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-txt">cd /path/to/logstash-output-mypluginname
mv logstash-output-example.gemspec logstash-output-mypluginname.gemspec
mv lib/logstash/outputs/example.rb lib/logstash/outputs/mypluginname.rb
mv spec/outputs/example_spec.rb spec/outputs/mypluginname_spec.rb</pre></div></li></ul></div></li></ol></div><p>Your file structure should look like this:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-txt">$ tree logstash-output-mypluginname
├── Gemfile
├── LICENSE
├── README.md
├── Rakefile
├── lib
│   └── logstash
│       └── outputs
│           └── mypluginname.rb
├── logstash-output-mypluginname.gemspec
└── spec
    └── outputs
        └── mypluginname_spec.rb</pre></div><p>For more information about the Ruby gem file structure and an excellent
walkthrough of the Ruby gem creation process, see
<a class="ulink" href="http://timelessrepo.com/making-ruby-gems" target="_top">http://timelessrepo.com/making-ruby-gems</a></p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_see_what_your_plugin_looks_like_4"></a>See what your plugin looks like<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Before we dive into the details, open up the plugin file in your favorite text editor
and take a look.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby"># encoding: utf-8
require "logstash/outputs/base"
require "logstash/namespace"

# Add any asciidoc formatted documentation here
# An example output that does nothing.
class LogStash::Outputs::Example &lt; LogStash::Outputs::Base
  config_name "example"

  # This sets the concurrency behavior of this plugin. By default it is :legacy, which was the standard
  # way concurrency worked before Logstash 2.4
  #
  # You should explicitly set it to either :single or :shared as :legacy will be removed in Logstash 6.0
  #
  # When configured as :single a single instance of the Output will be shared among the
  # pipeline worker threads. Access to the `#multi_receive/#multi_receive_encoded/#receive` method will be synchronized
  # i.e. only one thread will be active at a time making threadsafety much simpler.
  #
  # You can set this to :shared if your output is threadsafe. This will maximize
  # concurrency but you will need to make appropriate uses of mutexes in `#multi_receive/#receive`.
  #
  # Only the `#multi_receive/#multi_receive_encoded` methods need to actually be threadsafe, the other methods
  # will only be executed in a single thread
  concurrency :single

  public
  def register
  end # def register

  public
  # Takes an array of events
  # Must be threadsafe if `concurrency :shared` is set
  def multi_receive(events)
  end # def multi_receive
end # class LogStash::Outputs::Example</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_coding_output_plugins"></a>Coding output plugins<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Now let’s take a line-by-line look at the example plugin.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_encoding_literal_4"></a><code class="literal">encoding</code><a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>It seems like a small thing, but remember to specify the encoding at the
beginning of your plugin code:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh"># encoding: utf-8</pre></div><p>Logstash depends on things being in UTF-8, so we put this here to tell the Ruby
interpreter that we’re going to be using the UTF-8 encoding.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_require_literal_statements_4"></a><code class="literal">require</code> Statements<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Logstash output plugins require parent classes defined in
<code class="literal">logstash/outputs/base</code> and logstash/namespace:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">require "logstash/outputs/base"
require "logstash/namespace"</pre></div><p>Of course, the plugin you build may depend on other code, or even gems. Just put
them here along with these Logstash dependencies.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_plugin_body_4"></a>Plugin Body<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Let’s go through the various elements of the plugin itself.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_class_literal_declaration_4"></a><code class="literal">class</code> Declaration<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The output plugin class should be a subclass of
<code class="literal">LogStash::Outputs::Base</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">class LogStash::Outputs::Example &lt; LogStash::Outputs::Base</pre></div><p>The class name should closely mirror the plugin name, for example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">LogStash::Outputs::Example</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_config_name_literal_4"></a><code class="literal">config_name</code><a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">  config_name "example"</pre></div><p>This is the name your plugin will call inside the output configuration
block.</p><p>If you set <code class="literal">config_name "example"</code> in your plugin code,
the corresponding Logstash configuration block would need to look like this:</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_configuration_parameters_4"></a>Configuration Parameters<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">  config :variable_name, :validate =&gt; :variable_type, :default =&gt; "Default value", :required =&gt; boolean, :deprecated =&gt; boolean, :obsolete =&gt; string</pre></div><p>The configuration, or <code class="literal">config</code> section allows you to define as many (or as few)
parameters as are needed to enable Logstash to process events.</p><p>There are several configuration attributes:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">:validate</code> - allows you to enforce passing a particular data type to Logstash
for this configuration option, such as <code class="literal">:string</code>, <code class="literal">:password</code>, <code class="literal">:boolean</code>,
<code class="literal">:number</code>, <code class="literal">:array</code>, <code class="literal">:hash</code>, <code class="literal">:path</code> (a file-system path), <code class="literal">uri</code>, <code class="literal">:codec</code> (since
1.2.0), <code class="literal">:bytes</code>.  Note that this also works as a coercion
in that if I specify "true" for boolean (even though technically a string), it
will become a valid boolean in the config.  This coercion works for the
<code class="literal">:number</code> type as well where "1.2" becomes a float and "22" is an integer.
</li><li class="listitem">
<code class="literal">:default</code> - lets you specify a default value for a parameter
</li><li class="listitem">
<code class="literal">:required</code> - whether or not this parameter is mandatory (a Boolean <code class="literal">true</code> or
</li><li class="listitem">
<code class="literal">:list</code> - whether or not this value should be a list of values. Will typecheck the list members, and convert scalars to one element lists. Note that this mostly obviates the array type, though if you need lists of complex objects that will be more suitable.
<code class="literal">false</code>)
</li><li class="listitem">
<code class="literal">:deprecated</code> - informational (also a Boolean <code class="literal">true</code> or <code class="literal">false</code>)
</li><li class="listitem">
<code class="literal">:obsolete</code> - used to declare that a given setting has been removed and is no longer functioning. The idea is to provide an informed upgrade path to users who are still using a now-removed setting.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_plugin_methods_4"></a>Plugin Methods<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Logstash outputs must implement the <code class="literal">register</code> and <code class="literal">multi_receive</code> methods.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_register_literal_method_4"></a><code class="literal">register</code> Method<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">  public
  def register
  end # def register</pre></div><p>The Logstash <code class="literal">register</code> method is like an <code class="literal">initialize</code> method. It was originally
created to enforce having <code class="literal">super</code> called, preventing headaches for newbies.
(Note: It may go away in favor of <code class="literal">initialize</code>, in conjunction with some
enforced testing to ensure <code class="literal">super</code> is called.)</p><p><code class="literal">public</code> means the method can be called anywhere, not just within the class.
This is the default behavior for methods in Ruby, but it is specified explicitly
here anyway.</p><p>You can also assign instance variables here (variables prepended by <code class="literal">@</code>).
Configuration variables are now in scope as instance variables, like <code class="literal">@message</code></p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_building_the_plugin_4"></a>Building the Plugin<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>At this point in the process you have coded your plugin and are ready to build
a Ruby Gem from it. The following information will help you complete the process.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_external_dependencies_4"></a>External dependencies<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>A <code class="literal">require</code> statement in Ruby is used to include necessary code. In some cases
your plugin may require additional files.  For example, the collectd plugin
<a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-collectd/blob/master/lib/logstash/codecs/collectd.rb#L148" target="_top">uses</a>
the <code class="literal">types.db</code> file provided by collectd.  In the main directory of your plugin,
a file called <code class="literal">vendor.json</code> is where these files are described.</p><p>The <code class="literal">vendor.json</code> file contains an array of JSON objects, each describing a file
dependency. This example comes from the
<a class="ulink" href="https://github.com/logstash-plugins/logstash-codec-collectd/blob/master/vendor.json" target="_top">collectd</a>
codec plugin:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-txt">[{
        "sha1": "a90fe6cc53b76b7bdd56dc57950d90787cb9c96e",
        "url": "http://collectd.org/files/collectd-5.4.0.tar.gz",
        "files": [ "/src/types.db" ]
}]</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">sha1</code> is the sha1 signature used to verify the integrity of the file
referenced by <code class="literal">url</code>.
</li><li class="listitem">
<code class="literal">url</code> is the address from where Logstash will download the file.
</li><li class="listitem">
<code class="literal">files</code> is an optional array of files to extract from the downloaded file.
Note that while tar archives can use absolute or relative paths, treat them as
absolute in this array.  If <code class="literal">files</code> is not present, all files will be
uncompressed and extracted into the vendor directory.
</li></ul></div><p>Another example of the <code class="literal">vendor.json</code> file is the
<a class="ulink" href="https://github.com/logstash-plugins/logstash-filter-geoip/blob/master/vendor.json" target="_top"><code class="literal">geoip</code> filter</a></p><p>The process used to download these dependencies is to call <code class="literal">rake vendor</code>.  This
will be discussed further in the testing section of this document.</p><p>Another kind of external dependency is on jar files.  This will be described
in the "Add a <code class="literal">gemspec</code> file" section.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_add_a_gemfile_4"></a>Add a Gemfile<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Gemfiles allow Ruby’s Bundler to maintain the dependencies for your plugin.
Currently, all we’ll need is the Logstash gem, for testing, but if you require
other gems, you should add them in here.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>See <a class="ulink" href="http://bundler.io/gemfile.html" target="_top">Bundler’s Gemfile page</a> for more details.</p></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">source 'https://rubygems.org'
gemspec
gem "logstash", :github =&gt; "elastic/logstash", :branch =&gt; "7.x"</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_a_literal_gemspec_literal_file_4"></a>Add a <code class="literal">gemspec</code> file<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Gemspecs define the Ruby gem which will be built and contain your plugin.</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>More information can be found on the
<a class="ulink" href="http://guides.rubygems.org/specification-reference/" target="_top">Rubygems Specification page</a>.</p></div></div><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">Gem::Specification.new do |s|
  s.name = 'logstash-output-example'
  s.version = '0.1.0'
  s.licenses = ['Apache License (2.0)']
  s.summary = "This output does x, y, z in Logstash"
  s.description = "This gem is a logstash plugin required to be installed on top of the Logstash core pipeline using $LS_HOME/bin/logstash-plugin install gemname. This gem is not a stand-alone program"
  s.authors = ["Elastic"]
  s.email = 'info@elastic.co'
  s.homepage = "http://www.elastic.co/guide/en/logstash/current/index.html"
  s.require_paths = ["lib"]

  # Files
  s.files = Dir['lib/**/*','spec/**/*','vendor/**/*','*.gemspec','*.md','CONTRIBUTORS','Gemfile','LICENSE','NOTICE.TXT']
   # Tests
  s.test_files = s.files.grep(%r{^(test|spec|features)/})

  # Special flag to let us know this is actually a logstash plugin
  s.metadata = { "logstash_plugin" =&gt; "true", "logstash_group" =&gt; "output" }

  # Gem dependencies
  s.add_runtime_dependency "logstash-core-plugin-api", "&gt;= 1.60", "&lt;= 2.99"
  s.add_development_dependency 'logstash-devutils'
end</pre></div><p>It is appropriate to change these values to fit your plugin. In particular,
<code class="literal">s.name</code> and <code class="literal">s.summary</code> should reflect your plugin’s name and behavior.</p><p><code class="literal">s.licenses</code> and <code class="literal">s.version</code> are also important and will come into play when
you are ready to publish your plugin.</p><p>Logstash and all its plugins are licensed under
<a class="ulink" href="https://github.com/elastic/logstash/blob/master/LICENSE" target="_top">Apache License, version 2 ("ALv2")</a>.
If you make your plugin publicly available via <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a>,
please make sure to have this line in your gemspec:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">s.licenses = ['Apache License (2.0)']</code>
</li></ul></div><p>The gem version, designated by <code class="literal">s.version</code>, helps track changes to plugins over
time. You should use <a class="ulink" href="http://semver.org/" target="_top">semver versioning</a> strategy for version numbers.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_runtime_and_development_dependencies_4"></a>Runtime and Development Dependencies<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>At the bottom of the <code class="literal">gemspec</code> file is a section with a comment:
<code class="literal">Gem dependencies</code>.  This is where any other needed gems must be mentioned. If
a gem is necessary for your plugin to function, it is a runtime dependency. If
a gem are only used for testing, then it would be a development dependency.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>You can also have versioning requirements for your dependencies—including other
Logstash plugins:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">  # Gem dependencies
  s.add_runtime_dependency "logstash-core-plugin-api", "&gt;= 1.60", "&lt;= 2.99"
  s.add_development_dependency 'logstash-devutils'</pre></div><p>This gemspec has a runtime dependency on the logstash-core-plugin-api and requires that
it have a version number greater than or equal to version 1.60 and less than or equal to version 2.99.</p></div></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>All plugins have a runtime dependency on the <code class="literal">logstash-core-plugin-api</code> gem, and
a development dependency on <code class="literal">logstash-devutils</code>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_jar_dependencies_4"></a>Jar dependencies<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>In some cases, such as the
<a class="ulink" href="https://github.com/logstash-plugins/logstash-output-elasticsearch/blob/master/logstash-output-elasticsearch.gemspec#L22-L23" target="_top">Elasticsearch output plugin</a>,
your code may depend on a jar file.  In cases such as this, the dependency is
added in the gemspec file in this manner:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-ruby">  # Jar dependencies
  s.requirements &lt;&lt; "jar 'org.elasticsearch:elasticsearch', '5.0.0'"
  s.add_runtime_dependency 'jar-dependencies'</pre></div><p>With these both defined, the install process will search for the required jar
file at <a class="ulink" href="http://mvnrepository.com" target="_top">http://mvnrepository.com</a> and download the specified version.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_document_your_plugin_4"></a>Document your plugin<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Documentation is an important part of your plugin. All plugin documentation is
rendered and placed in the
<a class="ulink" href="http://www.elastic.co/guide/en/logstash/7.x" target="_top">Logstash Reference</a> and the <a class="ulink" href="https://www.elastic.co/guide/en/logstash-versioned-plugins/current" target="_top">Versioned plugin docs</a>.</p><p>See <a class="xref" href="plugin-doc.html" title="Documenting your plugin">Documenting your plugin</a> for tips and guidelines.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_add_tests_4"></a>Add Tests<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Logstash loves tests. Lots of tests. If you’re using your new output
plugin in a production environment, you’ll want to have some tests to ensure you
are not breaking any existing functionality.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>A full exposition on RSpec is outside the scope of this document. Learn
more about RSpec at <a class="ulink" href="http://rspec.info" target="_top">http://rspec.info</a></p></div></div><p>For help learning about tests and testing, look in the
<code class="literal">spec/outputs/</code> directory of several other similar
plugins.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_clone_and_test_4"></a>Clone and test!<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Now let’s start with a fresh clone of the plugin, build it and run the tests.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
<span class="strong strong"><strong>Clone your plugin into a temporary location</strong></span> Replace <code class="literal">GITUSERNAME</code> with
your github username, and <code class="literal">MYPLUGINNAME</code> with your plugin name.
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
<code class="literal">git clone https://github.com/GITUSERNAME/logstash-</code><code class="literal">output-MYPLUGINNAME.git</code>
</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
alternately, via ssh: <code class="literal">git clone git@github.com:GITUSERNAME/logstash-</code><code class="literal">output-MYPLUGINNAME.git</code>
</li></ul></div></li><li class="listitem">
<code class="literal">cd logstash-output-MYPLUGINNAME</code>
</li></ul></div></li></ul></div><p>Then, you’ll need to install your plugins dependencies with bundler:</p><pre class="screen">bundle install</pre><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>If your plugin has an external file dependency described in <code class="literal">vendor.json</code>, you
must download that dependency before running or testing.  You can do this by
running:</p><pre class="screen">rake vendor</pre></div></div><p>And finally, run the tests:</p><pre class="screen">bundle exec rspec</pre><p>You should see a success message, which looks something like this:</p><pre class="screen">Finished in 0.034 seconds
1 example, 0 failures</pre><p>Hooray! You’re almost there! (Unless you saw failures… you should fix those
  first).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_building_and_testing_4"></a>Building and Testing<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Now you’re ready to build your (well-tested) plugin into a Ruby gem.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_build_4"></a>Build<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>You already have all the necessary ingredients, so let’s go ahead and run the
build command:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">gem build logstash-output-example.gemspec</pre></div><p>That’s it!  Your gem should be built and be in the same path with the name</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">logstash-output-mypluginname-0.1.0.gem</pre></div><p>The <code class="literal">s.version</code> number from your gemspec file will provide the gem version, in
this case, <code class="literal">0.1.0</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_test_installation_4"></a>Test installation<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>You should test install your plugin into a clean installation of Logstash.
Download the latest version from the
<a class="ulink" href="https://www.elastic.co/downloads/logstash/" target="_top">Logstash downloads page</a>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
Untar and cd in to the directory:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">curl -O https://download.elastic.co/logstash/logstash/logstash-7.3.0.tar.gz
tar xzvf logstash-7.3.0.tar.gz
cd logstash-7.3.0</pre></div></li><li class="listitem"><p class="simpara">
Using the plugin tool, we can install the gem we just built.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
Replace <code class="literal">/my/logstash/plugins</code> with  the correct path to the gem for your
environment, and <code class="literal">0.1.0</code> with the correct version number from the gemspec file.
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">bin/logstash-plugin install /my/logstash/plugins/logstash-output-example/logstash-output-example-0.1.0.gem</pre></div></li><li class="listitem"><p class="simpara">
After running this, you should see feedback from Logstash that it was
successfully installed:
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">validating /my/logstash/plugins/logstash-output-example/logstash-output-example-0.1.0.gem &gt;= 0
Valid logstash plugin. Continuing...
Successfully installed 'logstash-output-example' with version '0.1.0'</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>You can also use the Logstash plugin tool to determine which plugins are
currently available:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">bin/logstash-plugin list</pre></div><p>Depending on what you have installed, you might see a short or long list of
plugins: inputs, codecs, filters and outputs.</p></div></div></li></ul></div></li><li class="listitem">
Now try running Logstash with a simple configuration passed in via the
command-line, using the <code class="literal">-e</code> flag.
</li></ol></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Your results will depend on what your output plugin is designed to do.</p></div></div><p>Congratulations! You’ve built, deployed and successfully run a Logstash
output.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_submitting_your_plugin_to_ulink_url_http_rubygems_org_rubygems_org_ulink_and_ulink_url_https_github_com_logstash_plugins_logstash_plugins_ulink_4"></a>Submitting your plugin to <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a> and <a class="ulink" href="https://github.com/logstash-plugins" target="_top">logstash-plugins</a><a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Logstash uses <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a> as its repository for all plugin
artifacts. Once you have developed your new plugin, you can make it available to
Logstash users by simply publishing it to RubyGems.org.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_licensing_4"></a>Licensing<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Logstash and all its plugins are licensed under
<a class="ulink" href="https://github.com/elasticsearch/logstash/blob/master/LICENSE" target="_top">Apache License, version 2 ("ALv2")</a>.
If you make your plugin publicly available via <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a>,
please make sure to have this line in your gemspec:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">s.licenses = ['Apache License (2.0)']</code>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_publishing_to_ulink_url_http_rubygems_org_rubygems_org_ulink_4"></a>Publishing to <a class="ulink" href="http://rubygems.org" target="_top">RubyGems.org</a><a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>To begin, you’ll need an account on RubyGems.org</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://rubygems.org/sign_up" target="_top">Sign-up for a RubyGems account</a>.
</li></ul></div><p>After creating an account,
<a class="ulink" href="http://guides.rubygems.org/rubygems-org-api/#api-authorization" target="_top">obtain</a> an API
key from RubyGems.org. By default, RubyGems uses the file <code class="literal">~/.gem/credentials</code>
to store your API key. These credentials will be used to publish the gem.
Replace <code class="literal">username</code> and <code class="literal">password</code> with the credentials you created at
RubyGems.org:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">curl -u username:password https://rubygems.org/api/v1/api_key.yaml &gt; ~/.gem/credentials
chmod 0600 ~/.gem/credentials</pre></div><p>Before proceeding, make sure you have the right version in your gemspec file
and commit your changes.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">s.version = '0.1.0'</code>
</li></ul></div><p>To publish version 0.1.0 of your new logstash gem:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">bundle install
bundle exec rake vendor
bundle exec rspec
bundle exec rake publish_gem</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>Executing <code class="literal">rake publish_gem</code>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Reads the version from the gemspec file (<code class="literal">s.version = '0.1.0'</code>)
</li><li class="listitem">
Checks in your local repository if a tag exists for that version. If the tag
already exists, it aborts the process. Otherwise, it creates a new version tag
in your local repository.
</li><li class="listitem">
Builds the gem
</li><li class="listitem">
Publishes the gem to RubyGems.org
</li></ol></div></div></div><p>That’s it! Your plugin is published! Logstash users can now install your plugin
by running:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">bin/logstash-plugin install logstash-output-mypluginname</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_contributing_your_source_code_to_ulink_url_https_github_com_logstash_plugins_logstash_plugins_ulink_4"></a>Contributing your source code to <a class="ulink" href="https://github.com/logstash-plugins" target="_top">logstash-plugins</a><a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>It is not required to contribute your source code to
<a class="ulink" href="https://github.com/logstash-plugins" target="_top">logstash-plugins</a> github organization, but
we always welcome new plugins!</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_benefits_4"></a>Benefits<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Some of the many benefits of having your plugin in the logstash-plugins
repository are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Discovery.</strong></span> Your plugin will appear in the <a class="ulink" href="http://www.elastic.co/guide/en/logstash/7.x" target="_top">Logstash Reference</a>,
where Logstash users look first for plugins and documentation.
</li><li class="listitem">
<span class="strong strong"><strong>Documentation.</strong></span> Your plugin documentation will automatically be added to the
<a class="ulink" href="http://www.elastic.co/guide/en/logstash/7.x" target="_top">Logstash Reference</a>.
</li><li class="listitem">
<span class="strong strong"><strong>Testing.</strong></span> With our testing infrastructure, your plugin will be continuously
tested against current and future releases of Logstash.  As a result, users will
have the assurance that if incompatibilities arise, they will be quickly
discovered and corrected.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_acceptance_guidelines_4"></a>Acceptance Guidelines<a href="https://github.com/elastic/logstash/edit/7.3/docs/static/include/pluginbody.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<span class="strong strong"><strong>Code Review.</strong></span> Your plugin must be reviewed by members of the community for
coherence, quality, readability, stability and security.
</li><li class="listitem">
<span class="strong strong"><strong>Tests.</strong></span> Your plugin must contain tests to be accepted.  These tests are also
subject to code review for scope and completeness.  It’s ok if you don’t know
how to write tests — we will guide you. We are working on publishing a guide to
creating tests for Logstash which will make it easier.  In the meantime, you can
refer to <a class="ulink" href="http://betterspecs.org/" target="_top">http://betterspecs.org/</a> for examples.
</li></ul></div><p>To begin migrating your plugin to logstash-plugins, simply create a new
<a class="ulink" href="https://github.com/elasticsearch/logstash/issues" target="_top">issue</a> in
the Logstash repository. When the acceptance guidelines are completed, we will
facilitate the move to the logstash-plugins organization using the recommended
<a class="ulink" href="https://help.github.com/articles/transferring-a-repository/#transferring-from-a-user-to-an-organization" target="_top">github process</a>.</p></div></div></div><div class="navfooter"><span class="prev"><a href="filter-new-plugin.html">
              « 
              How to write a Logstash filter plugin</a>
           
        </span><span class="next">
           
          <a href="plugin-doc.html">Documenting your plugin
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
