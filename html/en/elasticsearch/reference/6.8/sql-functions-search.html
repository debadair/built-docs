<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Full-Text Search Functions
        | Elasticsearch Reference [6.8]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [6.8]" /><link rel="up" href="sql-functions.html" title="Functions and Operators" /><link rel="prev" href="sql-functions-datetime.html" title="Date/Time and Interval Functions and Operators" /><link rel="next" href="sql-functions-math.html" title="Mathematical Functions" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/6.8" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="6.8" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [6.8]
    </a></span> » <span class="breadcrumb-link"><a href="xpack-sql.html">SQL Access</a></span> » <span class="breadcrumb-link"><a href="sql-functions.html">Functions and Operators</a></span> » <span class="breadcrumb-node">Full-Text Search Functions</span></div><div class="navheader"><span class="prev"><a href="sql-functions-datetime.html">
              « 
              Date/Time and Interval Functions and Operators</a>
           
        </span><span class="next">
           
          <a href="sql-functions-math.html">Mathematical Functions
               »
            </a></span></div><div class="xpack section"><div class="titlepage"><div><div><h2 class="title"><a id="sql-functions-search"></a>Full-Text Search Functions<a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/sql/functions/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h2></div></div></div><p>Search functions should be used when performing full-text search, namely
when the <code class="literal">MATCH</code> or <code class="literal">QUERY</code> predicates are being used.
Outside a, so-called, search context, these functions will return default values
such as <code class="literal">0</code> or <code class="literal">NULL</code>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sql-functions-search-match"></a><code class="literal">MATCH</code><a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/sql/functions/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><strong>Synopsis: </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">MATCH(
    field_exp,   <a id="CO463-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    constant_exp <a id="CO463-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
    [, options]) <a id="CO463-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span></pre></div><p>
</p><p><span class="strong strong"><strong>Input</strong></span>:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO463-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>field(s) to match</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO463-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>matching text</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO463-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>additional parameters; optional</p></td></tr></table></div><p><strong>Description: </strong>A full-text search option, in the form of a predicate, available in Elasticsearch SQL that gives the user control over powerful <a class="link" href="query-dsl-match-query.html" title="Match Query">match</a>
and <a class="link" href="query-dsl-multi-match-query.html" title="Multi Match Query">multi_match</a> Elasticsearch queries.</p><p>The first parameter is the field or fields to match against. In case it receives one value only, Elasticsearch SQL will use a <code class="literal">match</code> query to perform the search:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT author, name FROM library WHERE MATCH(author, 'frank');

    author     |       name
---------------+-------------------
Frank Herbert  |Dune
Frank Herbert  |Dune Messiah
Frank Herbert  |Children of Dune
Frank Herbert  |God Emperor of Dune</pre></div><p>However, it can also receive a list of fields and their corresponding optional <code class="literal">boost</code> value. In this case, Elasticsearch SQL will use a
<code class="literal">multi_match</code> query to match the documents:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE MATCH('author^2,name^5', 'frank dune');

    author     |       name        |    SCORE()
---------------+-------------------+---------------
Frank Herbert  |Dune               |11.443174
Frank Herbert  |Dune Messiah       |9.446628
Frank Herbert  |Children of Dune   |8.043277
Frank Herbert  |God Emperor of Dune|7.0029483</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The <code class="literal">multi_match</code> query in Elasticsearch has the option of <a class="link" href="query-dsl-multi-match-query.html" title="Multi Match Query">per-field boosting</a> that gives preferential weight
(in terms of scoring) to fields being searched in, using the <code class="literal">^</code> character. In the example above, the <code class="literal">name</code> field has a greater weight in
the final score than the <code class="literal">author</code> field when searching for <code class="literal">frank dune</code> text in both of them.</p></div></div><p>Both options above can be used in combination with the optional third parameter of the <code class="literal">MATCH()</code> predicate, where one can specify
additional configuration parameters (separated by semicolon <code class="literal">;</code>) for either <code class="literal">match</code> or <code class="literal">multi_match</code> queries. For example:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE MATCH(name, 'to the star', 'operator=or;cutoff_frequency=0.2');

     author      |                name                |    SCORE()
-----------------+------------------------------------+---------------
Peter F. Hamilton|Pandora's Star                      |3.0997515
Douglas Adams    |The Hitchhiker's Guide to the Galaxy|3.1756816</pre></div><p>In the more advanced example above, the <code class="literal">cutoff_frequency</code> parameter allows specifying an absolute or relative document frequency where
high frequency terms are moved into an optional subquery and are only scored if one of the low frequency (below the cutoff) terms in the
case of an <code class="literal">or</code> operator or all of the low frequency terms in the case of an <code class="literal">and</code> operator match. More about this you can find in the
<a class="xref" href="query-dsl-match-query.html#query-dsl-match-query-cutoff" title="Cutoff frequency">Cutoff frequency</a> page.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The allowed optional parameters for a single-field <code class="literal">MATCH()</code> variant (for the <code class="literal">match</code> Elasticsearch query) are: <code class="literal">analyzer</code>, <code class="literal">auto_generate_synonyms_phrase_query</code>,
<code class="literal">cutoff_frequency</code>, <code class="literal">lenient</code>, <code class="literal">fuzziness</code>, <code class="literal">fuzzy_transpositions</code>, <code class="literal">fuzzy_rewrite</code>, <code class="literal">minimum_should_match</code>, <code class="literal">operator</code>,
<code class="literal">max_expansions</code>, <code class="literal">prefix_length</code>.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The allowed optional parameters for a multi-field <code class="literal">MATCH()</code> variant (for the <code class="literal">multi_match</code> Elasticsearch query) are: <code class="literal">analyzer</code>, <code class="literal">auto_generate_synonyms_phrase_query</code>,
<code class="literal">cutoff_frequency</code>, <code class="literal">lenient</code>, <code class="literal">fuzziness</code>, <code class="literal">fuzzy_transpositions</code>, <code class="literal">fuzzy_rewrite</code>, <code class="literal">minimum_should_match</code>, <code class="literal">operator</code>,
<code class="literal">max_expansions</code>, <code class="literal">prefix_length</code>, <code class="literal">slop</code>, <code class="literal">tie_breaker</code>, <code class="literal">type</code>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sql-functions-search-query"></a><code class="literal">QUERY</code><a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/sql/functions/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><strong>Synopsis: </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">QUERY(
    constant_exp <a id="CO464-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
    [, options]) <a id="CO464-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span></pre></div><p>
</p><p><span class="strong strong"><strong>Input</strong></span>:</p><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO464-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>query text</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO464-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>additional parameters; optional</p></td></tr></table></div><p><strong>Description: </strong>Just like <code class="literal">MATCH</code>, <code class="literal">QUERY</code> is a full-text search predicate that gives the user control over the <a class="link" href="query-dsl-query-string-query.html" title="Query String Query">query_string</a> query in Elasticsearch.</p><p>The first parameter is basically the input that will be passed as is to the <code class="literal">query_string</code> query, which means that anything that <code class="literal">query_string</code>
accepts in its <code class="literal">query</code> field can be used here as well:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE QUERY('name:dune');

    author     |       name        |    SCORE()
---------------+-------------------+---------------
Frank Herbert  |Dune               |2.288635
Frank Herbert  |Dune Messiah       |1.8893257
Frank Herbert  |Children of Dune   |1.6086555
Frank Herbert  |God Emperor of Dune|1.4005898</pre></div><p>A more advanced example, showing more of the features that <code class="literal">query_string</code> supports, of course possible with Elasticsearch SQL:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT author, name, page_count, SCORE() FROM library WHERE QUERY('_exists_:"author" AND page_count:&gt;200 AND (name:/star.*/ OR name:duna~)');

      author      |       name        |  page_count   |    SCORE()
------------------+-------------------+---------------+---------------
Frank Herbert     |Dune               |604            |3.7164762
Frank Herbert     |Dune Messiah       |331            |3.416994
Frank Herbert     |Children of Dune   |408            |3.2064915
Frank Herbert     |God Emperor of Dune|454            |3.0504422
Peter F. Hamilton |Pandora's Star     |768            |3.0
Robert A. Heinlein|Starship Troopers  |335            |3.0</pre></div><p>The query above uses the <code class="literal">_exists_</code> query to select documents that have values in the <code class="literal">author</code> field, a range query for <code class="literal">page_count</code> and
regex and fuzziness queries for the <code class="literal">name</code> field.</p><p>If one needs to customize various configuration options that <code class="literal">query_string</code> exposes, this can be done using the second <span class="emphasis"><em>optional</em></span> parameter.
Multiple settings can be specified separated by a semicolon <code class="literal">;</code>:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT author, name, SCORE() FROM library WHERE QUERY('dune god', 'default_operator=and;default_field=name');

    author     |       name        |    SCORE()
---------------+-------------------+---------------
Frank Herbert  |God Emperor of Dune|3.6984892</pre></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>The allowed optional parameters for <code class="literal">QUERY()</code> are: <code class="literal">all_fields</code>, <code class="literal">allow_leading_wildcard</code>, <code class="literal">analyze_wildcard</code>, <code class="literal">analyzer</code>,
<code class="literal">auto_generate_phrase_queries</code>, <code class="literal">auto_generate_synonyms_phrase_query</code>, <code class="literal">default_field</code>, <code class="literal">default_operator</code>, <code class="literal">enable_position_increments</code>,
<code class="literal">escape</code>, <code class="literal">fuzziness</code>, <code class="literal">fuzzy_max_expansions</code>, <code class="literal">fuzzy_prefix_length</code>, <code class="literal">fuzzy_rewrite</code>, <code class="literal">fuzzy_transpositions</code>,
<code class="literal">lenient</code>, <code class="literal">max_determinized_states</code>, <code class="literal">minimum_should_match</code>, <code class="literal">phrase_slop</code>, <code class="literal">rewrite</code>, <code class="literal">quote_analyzer</code>,
<code class="literal">quote_field_suffix</code>, <code class="literal">split_on_whitespace</code>, <code class="literal">tie_breaker</code>, <code class="literal">time_zone</code>, <code class="literal">type</code>, <code class="literal">use_dis_max</code>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sql-functions-search-score"></a><code class="literal">SCORE</code><a href="https://github.com/elastic/elasticsearch/edit/6.8/docs/reference/sql/functions/search.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><strong>Synopsis: </strong>
</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SCORE()</pre></div><p>
</p><p><span class="strong strong"><strong>Input</strong></span>: <span class="emphasis"><em>none</em></span></p><p><span class="strong strong"><strong>Output</strong></span>: <code class="literal">double</code> numeric value</p><p><strong>Description: </strong>Returns the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/guide/2.x/relevance-intro.html" target="_top">relevance</a> of a given input to the executed query.
The higher score, the more relevant the data.</p><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p>When doing multiple text queries in the <code class="literal">WHERE</code> clause then, their scores will be
combined using the same rules as Elasticsearch’s
<a class="link" href="query-dsl-bool-query.html" title="Bool Query">bool query</a>.</p></div></div><p>Typically <code class="literal">SCORE</code> is used for ordering the results of a query based on their relevance:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT SCORE(), * FROM library WHERE MATCH(name, 'dune') ORDER BY SCORE() DESC;

    SCORE()    |    author     |       name        |  page_count   |    release_date
---------------+---------------+-------------------+---------------+--------------------
2.288635       |Frank Herbert  |Dune               |604            |1965-06-01T00:00:00Z
1.8893257      |Frank Herbert  |Dune Messiah       |331            |1969-10-15T00:00:00Z
1.6086555      |Frank Herbert  |Children of Dune   |408            |1976-04-21T00:00:00Z
1.4005898      |Frank Herbert  |God Emperor of Dune|454            |1981-05-28T00:00:00Z</pre></div><p>However, it is perfectly fine to return the score without sorting by it:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sql">SELECT SCORE() AS score, name, release_date FROM library WHERE QUERY('dune') ORDER BY YEAR(release_date) DESC;

     score     |       name        |    release_date
---------------+-------------------+--------------------
1.4005898      |God Emperor of Dune|1981-05-28T00:00:00Z
1.6086555      |Children of Dune   |1976-04-21T00:00:00Z
1.8893257      |Dune Messiah       |1969-10-15T00:00:00Z
2.288635       |Dune               |1965-06-01T00:00:00Z</pre></div></div></div><div class="navfooter"><span class="prev"><a href="sql-functions-datetime.html">
              « 
              Date/Time and Interval Functions and Operators</a>
           
        </span><span class="next">
           
          <a href="sql-functions-math.html">Mathematical Functions
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
