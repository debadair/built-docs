<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Moving Function Aggregation
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="search-aggregations-pipeline.html" title="Pipeline Aggregations" /><link rel="prev" href="search-aggregations-pipeline-movavg-aggregation.html" title="Moving Average Aggregation" /><link rel="next" href="search-aggregations-pipeline-cumulative-sum-aggregation.html" title="Cumulative Sum Aggregation" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span> » <span class="breadcrumb-link"><a href="search-aggregations-pipeline.html">Pipeline Aggregations</a></span> » <span class="breadcrumb-node">Moving Function Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-pipeline-movavg-aggregation.html">
              « 
              Moving Average Aggregation</a>
           
        </span><span class="next">
           
          <a href="search-aggregations-pipeline-cumulative-sum-aggregation.html">Cumulative Sum Aggregation
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-pipeline-movfn-aggregation"></a>Moving Function Aggregation<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Given an ordered series of data, the Moving Function aggregation will slide a window across the data and allow the user to specify a custom
script that is executed on each window of data.  For convenience, a number of common functions are predefined such as min/max, moving averages,
etc.</p><p>This is conceptually very similar to the <a class="link" href="search-aggregations-pipeline-movavg-aggregation.html" title="Moving Average Aggregation">Moving Average</a> pipeline aggregation, except
it provides more functionality.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_syntax_9"></a>Syntax<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>A <code class="literal">moving_fn</code> aggregation looks like this in isolation:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
    "moving_fn": {
        "buckets_path": "the_sum",
        "window": 10,
        "script": "MovingFunctions.min(values)"
    }
}</pre></div><div class="table"><a id="moving-fn-params"></a><p class="title"><strong>Table 16. <code class="literal">moving_fn</code> Parameters</strong></p><div class="table-contents"><table summary="moving_fn Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th><th align="left" valign="top">Required</th><th align="left" valign="top">Default Value</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">buckets_path</code></p></td><td align="left" valign="top"><p>Path to the metric of interest (see <a class="link" href="search-aggregations-pipeline.html#buckets-path-syntax" title="buckets_path Syntax"><code class="literal">buckets_path</code> Syntax</a> for more details</p></td><td align="left" valign="top"><p>Required</p></td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"><p><code class="literal">window</code></p></td><td align="left" valign="top"><p>The size of window to "slide" across the histogram.</p></td><td align="left" valign="top"><p>Required</p></td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"><p><code class="literal">script</code></p></td><td align="left" valign="top"><p>The script that should be executed on each window of data</p></td><td align="left" valign="top"><p>Required</p></td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"><p><code class="literal">shift</code></p></td><td align="left" valign="top"><p><a class="link" href="search-aggregations-pipeline-movfn-aggregation.html#shift-parameter" title="shift parameter">Shift</a> of window position.</p></td><td align="left" valign="top"><p>Optional</p></td><td align="left" valign="top"><p>0</p></td></tr></tbody></table></div></div><br class="table-break" /><p><code class="literal">moving_fn</code> aggregations must be embedded inside of a <code class="literal">histogram</code> or <code class="literal">date_histogram</code> aggregation.  They can be
embedded like any other metric aggregation:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{                <a id="CO106-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" } <a id="CO106-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
                },
                "the_movfn": {
                    "moving_fn": {
                        "buckets_path": "the_sum", <a id="CO106-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
                        "window": 10,
                        "script": "MovingFunctions.unweightedAvg(values)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/285.console"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO106-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>A <code class="literal">date_histogram</code> named "my_date_histo" is constructed on the "timestamp" field, with one-day intervals</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO106-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>A <code class="literal">sum</code> metric is used to calculate the sum of a field.  This could be any numeric metric (sum, min, max, etc)</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO106-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Finally, we specify a <code class="literal">moving_fn</code> aggregation which uses "the_sum" metric as its input.</p></td></tr></table></div><p>Moving averages are built by first specifying a <code class="literal">histogram</code> or <code class="literal">date_histogram</code> over a field.  You can then optionally
add numeric metrics, such as a <code class="literal">sum</code>, inside of that histogram.  Finally, the <code class="literal">moving_fn</code> is embedded inside the histogram.
The <code class="literal">buckets_path</code> parameter is then used to "point" at one of the sibling metrics inside of the histogram (see
<a class="xref" href="search-aggregations-pipeline.html#buckets-path-syntax" title="buckets_path Syntax"><code class="literal">buckets_path</code> Syntax</a> for a description of the syntax for <code class="literal">buckets_path</code>.</p><p>An example response from the above aggregation may look like:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-js">{
   "took": 11,
   "timed_out": false,
   "_shards": ...,
   "hits": ...,
   "aggregations": {
      "my_date_histo": {
         "buckets": [
             {
                 "key_as_string": "2015/01/01 00:00:00",
                 "key": 1420070400000,
                 "doc_count": 3,
                 "the_sum": {
                    "value": 550.0
                 },
                 "the_movfn": {
                    "value": null
                 }
             },
             {
                 "key_as_string": "2015/02/01 00:00:00",
                 "key": 1422748800000,
                 "doc_count": 2,
                 "the_sum": {
                    "value": 60.0
                 },
                 "the_movfn": {
                    "value": 550.0
                 }
             },
             {
                 "key_as_string": "2015/03/01 00:00:00",
                 "key": 1425168000000,
                 "doc_count": 2,
                 "the_sum": {
                    "value": 375.0
                 },
                 "the_movfn": {
                    "value": 305.0
                 }
             }
         ]
      }
   }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_custom_user_scripting"></a>Custom user scripting<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The Moving Function aggregation allows the user to specify any arbitrary script to define custom logic.  The script is invoked each time a
new window of data is collected.  These values are provided to the script in the <code class="literal">values</code> variable.  The script should then perform some
kind of calculation and emit a single <code class="literal">double</code> as the result.  Emitting <code class="literal">null</code> is not permitted, although <code class="literal">NaN</code> and +/- <code class="literal">Inf</code> are allowed.</p><p>For example, this script will simply return the first value from the window, or <code class="literal">NaN</code> if no values are available:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "return values.length &gt; 0 ? values[0] : Double.NaN"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/286.console"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="shift-parameter"></a>shift parameter<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>By default (with <code class="literal">shift = 0</code>), the window that is offered for calculation is the last <code class="literal">n</code> values excluding the current bucket.
Increasing <code class="literal">shift</code> by 1 moves starting window position by <code class="literal">1</code> to the right.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">To include current bucket to the window, use <code class="literal">shift = 1</code>.</li><li class="listitem">For center alignment (<code class="literal">n / 2</code> values before and after the current bucket), use <code class="literal">shift = window / 2</code>.</li><li class="listitem">For right alignment (<code class="literal">n</code> values after the current bucket), use <code class="literal">shift = window</code>.</li></ul></div><p>If either of window edges moves outside the borders of data series, the window shrinks to include available values only.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_pre_built_functions"></a>Pre-built Functions<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>For convenience, a number of functions have been prebuilt and are available inside the <code class="literal">moving_fn</code> script context:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><code class="literal">max()</code></li><li class="listitem"><code class="literal">min()</code></li><li class="listitem"><code class="literal">sum()</code></li><li class="listitem"><code class="literal">stdDev()</code></li><li class="listitem"><code class="literal">unweightedAvg()</code></li><li class="listitem"><code class="literal">linearWeightedAvg()</code></li><li class="listitem"><code class="literal">ewma()</code></li><li class="listitem"><code class="literal">holt()</code></li><li class="listitem"><code class="literal">holtWinters()</code></li></ul></div><p>The functions are available from the <code class="literal">MovingFunctions</code> namespace.  E.g. <code class="literal">MovingFunctions.max()</code></p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_max_function"></a>max Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This function accepts a collection of doubles and returns the maximum value in that window. <code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the maximum
is only calculated over the real values. If the window is empty, or all values are <code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.</p><div class="table"><a id="max-params"></a><p class="title"><strong>Table 17. <code class="literal">max(double[] values)</code> Parameters</strong></p><div class="table-contents"><table summary="max(double[] values) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the maximum</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_max": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.max(values)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/287.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_min_function"></a>min Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This function accepts a collection of doubles and returns the minimum value in that window.  <code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the minimum
is only calculated over the real values. If the window is empty, or all values are <code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.</p><div class="table"><a id="min-params"></a><p class="title"><strong>Table 18. <code class="literal">min(double[] values)</code> Parameters</strong></p><div class="table-contents"><table summary="min(double[] values) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the minimum</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_min": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.min(values)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/288.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_sum_function"></a>sum Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This function accepts a collection of doubles and returns the sum of the values in that window.  <code class="literal">null</code> and <code class="literal">NaN</code> values are ignored;
the sum is only calculated over the real values.  If the window is empty, or all values are <code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">0.0</code> is returned as the result.</p><div class="table"><a id="sum-params"></a><p class="title"><strong>Table 19. <code class="literal">sum(double[] values)</code> Parameters</strong></p><div class="table-contents"><table summary="sum(double[] values) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the sum of</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_sum": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.sum(values)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/289.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_stddev_function"></a>stdDev Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>This function accepts a collection of doubles and average, then returns the standard deviation of the values in that window.
<code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the sum is only calculated over the real values.  If the window is empty, or all values are
<code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">0.0</code> is returned as the result.</p><div class="table"><a id="stddev-params"></a><p class="title"><strong>Table 20. <code class="literal">stdDev(double[] values)</code> Parameters</strong></p><div class="table-contents"><table summary="stdDev(double[] values) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the standard deviation of</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">avg</code></p></td><td align="left" valign="top"><p>The average of the window</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_moving_sum": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.stdDev(values, MovingFunctions.unweightedAvg(values))"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/290.console"></div><p>The <code class="literal">avg</code> parameter must be provided to the standard deviation function because different styles of averages can be computed on the window
(simple, linearly weighted, etc).  The various moving averages that are detailed below can be used to calculate the average for the
standard deviation function.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_unweightedavg_function"></a>unweightedAvg Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The <code class="literal">unweightedAvg</code> function calculates the sum of all values in the window, then divides by the size of the window.  It is effectively
a simple arithmetic mean of the window.  The simple moving average does not perform any time-dependent weighting, which means
the values from a <code class="literal">simple</code> moving average tend to "lag" behind the real data.</p><p><code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the average is only calculated over the real values. If the window is empty, or all values are
<code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.  This means that the count used in the average calculation is count of non-<code class="literal">null</code>,non-<code class="literal">NaN</code>
values.</p><div class="table"><a id="unweightedavg-params"></a><p class="title"><strong>Table 21. <code class="literal">unweightedAvg(double[] values)</code> Parameters</strong></p><div class="table-contents"><table summary="unweightedAvg(double[] values) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the sum of</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.unweightedAvg(values)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/291.console"></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_linearweightedavg_function"></a>linearWeightedAvg Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">linearWeightedAvg</code> function assigns a linear weighting to points in the series, such that "older" datapoints (e.g. those at
the beginning of the window) contribute a linearly less amount to the total average.  The linear weighting helps reduce
the "lag" behind the data’s mean, since older points have less influence.</p><p>If the window is empty, or all values are <code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.</p><div class="table"><a id="linearweightedavg-params"></a><p class="title"><strong>Table 22. <code class="literal">linearWeightedAvg(double[] values)</code> Parameters</strong></p><div class="table-contents"><table summary="linearWeightedAvg(double[] values) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the sum of</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.linearWeightedAvg(values)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/292.console"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_ewma_function"></a>ewma Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">ewma</code> function (aka "single-exponential") is similar to the <code class="literal">linearMovAvg</code> function,
except older data-points become exponentially less important,
rather than linearly less important.  The speed at which the importance decays can be controlled with an <code class="literal">alpha</code>
setting.  Small values make the weight decay slowly, which provides greater smoothing and takes into account a larger
portion of the window.  Larger values make the weight decay quickly, which reduces the impact of older values on the
moving average.  This tends to make the moving average track the data more closely but with less smoothing.</p><p><code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the average is only calculated over the real values. If the window is empty, or all values are
<code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.  This means that the count used in the average calculation is count of non-<code class="literal">null</code>,non-<code class="literal">NaN</code>
values.</p><div class="table"><a id="ewma-params"></a><p class="title"><strong>Table 23. <code class="literal">ewma(double[] values, double alpha)</code> Parameters</strong></p><div class="table-contents"><table summary="ewma(double[] values, double alpha) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the sum of</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">alpha</code></p></td><td align="left" valign="top"><p>Exponential decay</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.ewma(values, 0.3)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/293.console"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_holt_function"></a>holt Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">holt</code> function (aka "double exponential") incorporates a second exponential term which
tracks the data’s trend.  Single exponential does not perform well when the data has an underlying linear trend.  The
double exponential model calculates two values internally: a "level" and a "trend".</p><p>The level calculation is similar to <code class="literal">ewma</code>, and is an exponentially weighted view of the data.  The difference is
that the previously smoothed value is used instead of the raw value, which allows it to stay close to the original series.
The trend calculation looks at the difference between the current and last value (e.g. the slope, or trend, of the
smoothed data).  The trend value is also exponentially weighted.</p><p>Values are produced by multiplying the level and trend components.</p><p><code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the average is only calculated over the real values. If the window is empty, or all values are
<code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.  This means that the count used in the average calculation is count of non-<code class="literal">null</code>,non-<code class="literal">NaN</code>
values.</p><div class="table"><a id="holt-params"></a><p class="title"><strong>Table 24. <code class="literal">holt(double[] values, double alpha)</code> Parameters</strong></p><div class="table-contents"><table summary="holt(double[] values, double alpha) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the sum of</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">alpha</code></p></td><td align="left" valign="top"><p>Level decay value</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">beta</code></p></td><td align="left" valign="top"><p>Trend decay value</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "MovingFunctions.holt(values, 0.3, 0.1)"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/294.console"></div><p>In practice, the <code class="literal">alpha</code> value behaves very similarly in <code class="literal">holtMovAvg</code> as <code class="literal">ewmaMovAvg</code>: small values produce more smoothing
and more lag, while larger values produce closer tracking and less lag.  The value of <code class="literal">beta</code> is often difficult
to see.  Small values emphasize long-term trends (such as a constant linear trend in the whole series), while larger
values emphasize short-term trends.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_holtwinters_function"></a>holtWinters Function<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The <code class="literal">holtWinters</code> function (aka "triple exponential") incorporates a third exponential term which
tracks the seasonal aspect of your data.  This aggregation therefore smooths based on three components: "level", "trend"
and "seasonality".</p><p>The level and trend calculation is identical to <code class="literal">holt</code> The seasonal calculation looks at the difference between
the current point, and the point one period earlier.</p><p>Holt-Winters requires a little more handholding than the other moving averages.  You need to specify the "periodicity"
of your data: e.g. if your data has cyclic trends every 7 days, you would set <code class="literal">period = 7</code>.  Similarly if there was
a monthly trend, you would set it to <code class="literal">30</code>.  There is currently no periodicity detection, although that is planned
for future enhancements.</p><p><code class="literal">null</code> and <code class="literal">NaN</code> values are ignored; the average is only calculated over the real values. If the window is empty, or all values are
<code class="literal">null</code>/<code class="literal">NaN</code>, <code class="literal">NaN</code> is returned as the result.  This means that the count used in the average calculation is count of non-<code class="literal">null</code>,non-<code class="literal">NaN</code>
values.</p><div class="table"><a id="holtwinters-params"></a><p class="title"><strong>Table 25. <code class="literal">holtWinters(double[] values, double alpha)</code> Parameters</strong></p><div class="table-contents"><table summary="holtWinters(double[] values, double alpha) Parameters" cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter Name</th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">values</code></p></td><td align="left" valign="top"><p>The window of values to find the sum of</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">alpha</code></p></td><td align="left" valign="top"><p>Level decay value</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">beta</code></p></td><td align="left" valign="top"><p>Trend decay value</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">gamma</code></p></td><td align="left" valign="top"><p>Seasonality decay value</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">period</code></p></td><td align="left" valign="top"><p>The periodicity of the data</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">multiplicative</code></p></td><td align="left" valign="top"><p>True if you wish to use multiplicative holt-winters, false to use additive</p></td></tr></tbody></table></div></div><br class="table-break" /><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">POST /_search
{
    "size": 0,
    "aggs": {
        "my_date_histo":{
            "date_histogram":{
                "field":"date",
                "calendar_interval":"1M"
            },
            "aggs":{
                "the_sum":{
                    "sum":{ "field": "price" }
                },
                "the_movavg": {
                    "moving_fn": {
                        "buckets_path": "the_sum",
                        "window": 10,
                        "script": "if (values.length &gt; 5*2) {MovingFunctions.holtWinters(values, 0.3, 0.1, 0.1, 5, false)}"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/295.console"></div><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Multiplicative Holt-Winters works by dividing each data point by the seasonal value.  This is problematic if any of
your data is zero, or if there are gaps in the data (since this results in a divid-by-zero).  To combat this, the
<code class="literal">mult</code> Holt-Winters pads all values by a very small amount (1*10<sup>-10</sup>) so that all values are non-zero.  This affects
the result, but only minimally.  If your data is non-zero, or you prefer to see <code class="literal">NaN</code> when zero’s are encountered,
you can disable this behavior with <code class="literal">pad: false</code></p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_cold_start"></a>"Cold Start"<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/aggregations/pipeline/movfn-aggregation.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Unfortunately, due to the nature of Holt-Winters, it requires two periods of data to "bootstrap" the algorithm.  This
means that your <code class="literal">window</code> must always be <span class="strong strong"><strong>at least</strong></span> twice the size of your period.  An exception will be thrown if it
isn’t.  It also means that Holt-Winters will not emit a value for the first <code class="literal">2 * period</code> buckets; the current algorithm
does not backcast.</p><p>You’ll notice in the above example we have an <code class="literal">if ()</code> statement checking the size of values.  This is checking to make sure
we have two periods worth of data (<code class="literal">5 * 2</code>, where 5 is the period specified in the <code class="literal">holtWintersMovAvg</code> function) before calling
the holt-winters function.</p></div></div></div><div class="navfooter"><span class="prev"><a href="search-aggregations-pipeline-movavg-aggregation.html">
              « 
              Moving Average Aggregation</a>
           
        </span><span class="next">
           
          <a href="search-aggregations-pipeline-cumulative-sum-aggregation.html">Cumulative Sum Aggregation
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
