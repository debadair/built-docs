<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Node
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="modules.html" title="Modules" /><link rel="prev" href="modules-network.html" title="Network Settings" /><link rel="next" href="modules-plugins.html" title="Plugins" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="modules.html">Modules</a></span> » <span class="breadcrumb-node">Node</span></div><div class="navheader"><span class="prev"><a href="modules-network.html">
              « 
              Network Settings</a>
           
        </span><span class="next">
           
          <a href="modules-plugins.html">Plugins
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-node"></a>Node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Any time that you start an instance of Elasticsearch, you are starting a
<span class="emphasis"><em>node</em></span>. A collection of connected nodes is called a
<a class="link" href="modules-cluster.html" title="Shard allocation and cluster-level routing">cluster</a>. If you are running a single node of Elasticsearch,
then you have a cluster of one node.</p><p>Every node in the cluster can handle <a class="link" href="modules-http.html" title="HTTP">HTTP</a> and
<a class="link" href="modules-transport.html" title="Transport">Transport</a> traffic by default. The transport layer
is used exclusively for communication between nodes; the HTTP layer is
used by REST clients.</p><p>All nodes know about all the other nodes in the cluster and can forward client
requests to the appropriate node.</p><p>By default, a node is all of the following types: master-eligible, data, ingest,
and machine learning (if available).</p><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>As the cluster grows and in particular if you have large machine learning jobs,
consider separating dedicated master-eligible nodes from dedicated data nodes
and dedicated machine learning nodes.</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><a class="link" href="modules-node.html#master-node" title="Master Eligible Node">Master-eligible node</a></span></dt><dd>A node that has <code class="literal">node.master</code> set to <code class="literal">true</code> (default), which makes it eligible
to be <a class="link" href="modules-discovery.html" title="Discovery and cluster formation">elected as the <span class="emphasis"><em>master</em></span> node</a>, which controls
the cluster.</dd><dt><span class="term"><a class="link" href="modules-node.html#data-node" title="Data Node">Data node</a></span></dt><dd>A node that has <code class="literal">node.data</code> set to <code class="literal">true</code> (default). Data nodes hold data and
perform data related operations such as CRUD, search, and aggregations.</dd><dt><span class="term"><a class="link" href="ingest.html" title="Ingest node">Ingest node</a></span></dt><dd>A node that has <code class="literal">node.ingest</code> set to <code class="literal">true</code> (default). Ingest nodes are able
to apply an <a class="link" href="pipeline.html" title="Pipeline Definition">ingest pipeline</a> to a document in order to transform
and enrich the document before indexing. With a heavy ingest load, it makes
sense to use dedicated ingest nodes and to mark the master and data nodes as
<code class="literal">node.ingest: false</code>.</dd><dt><span class="term"><a class="link" href="modules-node.html#ml-node">Machine learning node</a></span></dt><dd><p class="simpara">A node that has <code class="literal">xpack.ml.enabled</code> and <code class="literal">node.ml</code> set to <code class="literal">true</code>, which is the
default behavior in the Elasticsearch default distribution. If you want to use machine learning features,
there must be at least one machine learning node in your cluster. For more information about
machine learning features, see
<a class="ulink" href="https://www.elastic.co/guide/en/elastic-stack-overview/master/xpack-ml.html" target="_top">Machine learning in the Elastic Stack</a>.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>If you use the OSS-only distribution, do not set <code class="literal">node.ml</code>. Otherwise, the node
fails to start.</p></div></div></dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><h3>Coordinating node<a id="coordinating-node"></a></h3><p>Requests like search requests or bulk-indexing requests may involve data held
on different data nodes. A search request, for example, is executed in two
phases which are coordinated by the node which receives the client request — the <span class="emphasis"><em>coordinating node</em></span>.</p><p>In the <span class="emphasis"><em>scatter</em></span> phase, the coordinating node forwards the request to the data
nodes which hold the data.  Each data node executes the request locally and
returns its results to the coordinating node. In the <span class="emphasis"><em>gather</em></span>  phase, the
coordinating node reduces each data node’s results into a single global
resultset.</p><p>Every node is implicitly a coordinating node. This means that a node that has
all three <code class="literal">node.master</code>, <code class="literal">node.data</code> and <code class="literal">node.ingest</code> set to <code class="literal">false</code> will
only act as a coordinating node, which cannot be disabled. As a result, such
a node needs to have enough memory and CPU in order to deal with the gather
phase.</p></div></div><h3><a id="master-node"></a>Master Eligible Node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The master node is responsible for lightweight cluster-wide actions such as
creating or deleting an index, tracking which nodes are part of the cluster,
and deciding which shards to allocate to which nodes. It is important for
cluster health to have a stable master node.</p><p>Any master-eligible node that is not a <a class="link" href="modules-node.html#voting-only-node" title="Voting-only master-eligible node">voting-only node</a> may
be elected to become the master node by the <a class="link" href="modules-discovery.html" title="Discovery and cluster formation">master election
process</a>.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>Master nodes must have access to the <code class="literal">data/</code> directory (just like
<code class="literal">data</code> nodes) as this is where the cluster state is persisted between node restarts.</p></div></div><p>Indexing and searching your data is CPU-, memory-, and I/O-intensive work
which can put pressure on a node’s resources. To ensure that your master
node is stable and not under pressure, it is a good idea in a bigger
cluster to split the roles between dedicated master-eligible nodes and
dedicated data nodes.</p><p>While master nodes can also behave as <a class="link" href="modules-node.html#coordinating-node" title="Coordinating node">coordinating nodes</a>
and route search and indexing requests from clients to data nodes, it is
better <span class="emphasis"><em>not</em></span> to use dedicated master nodes for this purpose. It is important
for the stability of the cluster that master-eligible nodes do as little work
as possible.</p><p>To create a dedicated master-eligible node in the default distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: true <a id="CO291-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.voting_only: false <a id="CO291-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.data: false <a id="CO291-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
node.ingest: false <a id="CO291-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
node.ml: false <a id="CO291-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
xpack.ml.enabled: true <a id="CO291-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span>
cluster.remote.connect: false <a id="CO291-7"></a><span><img src="images/icons/callouts/7.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.master</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.voting_only</code> role is disabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ml</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">xpack.ml.enabled</code> setting is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO291-7"><span><img src="images/icons/callouts/7.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><p>To create a dedicated master-eligible node in the OSS-only distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: true <a id="CO292-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.data: false <a id="CO292-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.ingest: false <a id="CO292-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
cluster.remote.connect: false <a id="CO292-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO292-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.master</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO292-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO292-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO292-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><h4><a id="voting-only-node"></a>Voting-only master-eligible node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>A voting-only master-eligible node is a node that participates in
<a class="link" href="modules-discovery.html" title="Discovery and cluster formation">master elections</a> but which will not act as the cluster’s
elected master node. In particular, a voting-only node can serve as a tiebreaker
in elections.</p><p>It may seem confusing to use the term "master-eligible" to describe a
voting-only node since such a node is not actually eligible to become the master
at all. This terminology is an unfortunate consequence of history:
master-eligible nodes are those nodes that participate in elections and perform
certain tasks during cluster state publications, and voting-only nodes have the
same responsibilities even if they can never become the elected master.</p><p>To configure a master-eligible node as a voting-only node, set the following
setting:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.voting_only: true <a id="CO293-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO293-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The default for <code class="literal">node.voting_only</code> is <code class="literal">false</code>.</p></td></tr></table></div><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>The <code class="literal">voting_only</code> role requires the default distribution of Elasticsearch
and is not supported in the OSS-only distribution. If you use the OSS-only distribution and set
<code class="literal">node.voting_only</code> then the node will fail to start.  Also note that only
master-eligible nodes can be marked as voting-only.</p></div></div><p>High availability (HA) clusters require at least three master-eligible nodes, at
least two of which are not voting-only nodes. Such a cluster will be able to
elect a master node even if one of the nodes fails.</p><p>Since voting-only nodes never act as the cluster’s elected master, they may
require require less heap and a less powerful CPU than the true master nodes.
However all master-eligible nodes, including voting-only nodes, require
reasonably fast persistent storage and a reliable and low-latency network
connection to the rest of the cluster, since they are on the critical path for
<a class="link" href="cluster-state-publishing.html" title="Publishing the cluster state">publishing cluster state updates</a>.</p><p>Voting-only master-eligible nodes may also fill other roles in your cluster.
For instance, a node may be both a data node and a voting-only master-eligible
node. A <span class="emphasis"><em>dedicated</em></span> voting-only master-eligible nodes is a voting-only
master-eligible node that fills no other roles in the cluster. To create a
dedicated voting-only master-eligible node in the default distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: true <a id="CO294-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.voting_only: true <a id="CO294-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.data: false <a id="CO294-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
node.ingest: false <a id="CO294-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
node.ml: false <a id="CO294-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
xpack.ml.enabled: true <a id="CO294-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span>
cluster.remote.connect: false <a id="CO294-7"></a><span><img src="images/icons/callouts/7.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.master</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Enable the <code class="literal">node.voting_only</code> role (disabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ml</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">xpack.ml.enabled</code> setting is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO294-7"><span><img src="images/icons/callouts/7.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><h3><a id="data-node"></a>Data Node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Data nodes hold the shards that contain the documents you have indexed. Data
nodes handle data related operations like CRUD, search, and aggregations.
These operations are I/O-, memory-, and CPU-intensive. It is important to
monitor these resources and to add more data nodes if they are overloaded.</p><p>The main benefit of having dedicated data nodes is the separation of the
master and data roles.</p><p>To create a dedicated data node in the default distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO295-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.voting_only: false <a id="CO295-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.data: true <a id="CO295-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
node.ingest: false <a id="CO295-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
node.ml: false <a id="CO295-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
cluster.remote.connect: false <a id="CO295-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.voting_only</code> role is disabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.data</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ml</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><p>To create a dedicated data node in the OSS-only distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO296-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.data: true <a id="CO296-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.ingest: false <a id="CO296-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
cluster.remote.connect: false <a id="CO296-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.data</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><h3><a id="node-ingest-node"></a>Ingest Node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Ingest nodes can execute pre-processing pipelines, composed of one or more
ingest processors. Depending on the type of operations performed by the ingest
processors and the required resources, it may make sense to have dedicated
ingest nodes, that will only perform this specific task.</p><p>To create a dedicated ingest node in the default distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO297-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.voting_only: false <a id="CO297-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.data: false <a id="CO297-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
node.ingest: true <a id="CO297-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
node.ml: false <a id="CO297-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
cluster.remote.connect: false <a id="CO297-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO297-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO297-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.voting_only</code> role is disabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO297-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO297-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.ingest</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO297-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ml</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO297-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><p>To create a dedicated ingest node in the OSS-only distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO298-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.data: false <a id="CO298-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.ingest: true <a id="CO298-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
cluster.remote.connect: false <a id="CO298-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO298-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO298-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO298-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.ingest</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO298-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><h3><a id="coordinating-only-node"></a>Coordinating only node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>If you take away the ability to be able to handle master duties, to hold data,
and pre-process documents, then you are left with a <span class="emphasis"><em>coordinating</em></span> node that
can only route requests, handle the search reduce phase, and distribute bulk
indexing. Essentially, coordinating only nodes behave as smart load balancers.</p><p>Coordinating only nodes can benefit large clusters by offloading the
coordinating node role from data and master-eligible nodes.  They join the
cluster and receive the full <a class="link" href="cluster-state.html" title="Cluster State">cluster state</a>, like every other
node, and they use the cluster state to route requests directly to the
appropriate place(s).</p><div class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p>Adding too many coordinating only nodes to a cluster can increase the
burden on the entire cluster because the elected master node must await
acknowledgement of cluster state updates from every node! The benefit of
coordinating only nodes should not be overstated — data nodes can happily
serve the same purpose.</p></div></div><p>To create a dedicated coordinating node in the default distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO299-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.voting_only: false <a id="CO299-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.data: false <a id="CO299-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
node.ingest: false <a id="CO299-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
node.ml: false <a id="CO299-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
cluster.remote.connect: false <a id="CO299-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO299-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO299-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.voting_only</code> role is disabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO299-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO299-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO299-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ml</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO299-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><p>To create a dedicated coordinating node in the OSS-only distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO300-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.data: false <a id="CO300-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.ingest: false <a id="CO300-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
cluster.remote.connect: false <a id="CO300-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO300-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO300-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO300-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO300-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><h3><a id="ml-node"></a><span class="xpack xpack">Machine learning node</span><a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a><a class="xpack_tag" href="/subscriptions"></a></h3><p>The machine learning features provide machine learning nodes, which run jobs and handle machine learning API
requests. If <code class="literal">xpack.ml.enabled</code> is set to true and <code class="literal">node.ml</code> is set to <code class="literal">false</code>,
the node can service API requests but it cannot run jobs.</p><p>If you want to use machine learning features in your cluster, you must enable machine learning
(set <code class="literal">xpack.ml.enabled</code> to <code class="literal">true</code>) on all master-eligible nodes. If you have the
OSS-only distribution, do not use these settings.</p><p>For more information about these settings, see <a class="xref" href="ml-settings.html" title="Machine learning settings in Elasticsearch">Machine learning settings</a>.</p><p>To create a dedicated machine learning node in the default distribution, set:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">node.master: false <a id="CO301-1"></a><span><img src="images/icons/callouts/1.png" alt="" /></span>
node.voting_only: false <a id="CO301-2"></a><span><img src="images/icons/callouts/2.png" alt="" /></span>
node.data: false <a id="CO301-3"></a><span><img src="images/icons/callouts/3.png" alt="" /></span>
node.ingest: false <a id="CO301-4"></a><span><img src="images/icons/callouts/4.png" alt="" /></span>
node.ml: true <a id="CO301-5"></a><span><img src="images/icons/callouts/5.png" alt="" /></span>
xpack.ml.enabled: true <a id="CO301-6"></a><span><img src="images/icons/callouts/6.png" alt="" /></span>
cluster.remote.connect: false <a id="CO301-7"></a><span><img src="images/icons/callouts/7.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-1"><span><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.master</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-2"><span><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.voting_only</code> role is disabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-3"><span><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.data</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-4"><span><img src="images/icons/callouts/4.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable the <code class="literal">node.ingest</code> role (enabled by default).</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-5"><span><img src="images/icons/callouts/5.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">node.ml</code> role is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-6"><span><img src="images/icons/callouts/6.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>The <code class="literal">xpack.ml.enabled</code> setting is enabled by default.</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO301-7"><span><img src="images/icons/callouts/7.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>Disable cross-cluster search (enabled by default).</p></td></tr></table></div><h3><a id="change-node-role"></a>Changing the role of a node<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Each data node maintains the following data on disk:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the shard data for every shard allocated to that node,</li><li class="listitem">the index metadata corresponding with every shard allocated to that node, and</li><li class="listitem">the cluster-wide metadata, such as settings and index templates.</li></ul></div><p>Similarly, each master-eligible node maintains the following data on disk:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">the index metadata for every index in the cluster, and</li><li class="listitem">the cluster-wide metadata, such as settings and index templates.</li></ul></div><p>Each node checks the contents of its data path at startup. If it discovers
unexpected data then it will refuse to start. This is to avoid importing
unwanted <a class="link" href="modules-gateway-dangling-indices.html" title="Dangling indices">dangling indices</a> which can lead
to a red cluster health. To be more precise, nodes with <code class="literal">node.data: false</code> will
refuse to start if they find any shard data on disk at startup, and nodes with
both <code class="literal">node.master: false</code> and <code class="literal">node.data: false</code> will refuse to start if they
have any index metadata on disk at startup.</p><p>It is possible to change the roles of a node by adjusting its
<code class="literal">elasticsearch.yml</code> file and restarting it. This is known as <span class="emphasis"><em>repurposing</em></span> a
node. In order to satisfy the checks for unexpected data described above, you
must perform some extra steps to prepare a node for repurposing when setting
its <code class="literal">node.data</code> or <code class="literal">node.master</code> roles to <code class="literal">false</code>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">If you want to repurpose a data node by changing <code class="literal">node.data</code> to <code class="literal">false</code> then
you should first use an <a class="link" href="allocation-filtering.html" title="Cluster-level shard allocation filtering">allocation filter</a> to safely
migrate all the shard data onto other nodes in the cluster.</li><li class="listitem">If you want to repurpose a node to have both <code class="literal">node.master: false</code> and
<code class="literal">node.data: false</code> then it is simplest to start a brand-new node with an
empty data path and the desired roles. You may find it safest to use an
<a class="link" href="allocation-filtering.html" title="Cluster-level shard allocation filtering">allocation filter</a> to migrate the shard data
elsewhere in the cluster first.</li></ul></div><p>If it is not possible to follow these extra steps then you may be able to use
the <a class="link" href="node-tool.html#node-tool-repurpose" title="Changing the role of a node"><code class="literal">elasticsearch-node repurpose</code></a> tool to delete any
excess data that prevents a node from starting.</p><h2><a id="_node_data_path_settings"></a>Node data path settings<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><h3><a id="data-path"></a><code class="literal">path.data</code><a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Every data and master-eligible node requires access to a data directory where
shards and index and cluster metadata will be stored. The <code class="literal">path.data</code> defaults
to <code class="literal">$ES_HOME/data</code> but can be configured in the <code class="literal">elasticsearch.yml</code> config
file an absolute path or a path relative to <code class="literal">$ES_HOME</code> as follows:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-yaml">path.data:  /var/elasticsearch/data</pre></div><p>Like all node settings, it can also be specified on the command line as:</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-sh">./bin/elasticsearch -Epath.data=/var/elasticsearch/data</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p>When using the <code class="literal">.zip</code> or <code class="literal">.tar.gz</code> distributions, the <code class="literal">path.data</code> setting
should be configured to locate the data directory outside the Elasticsearch
home directory, so that the home directory can be deleted without deleting
your data! The RPM and Debian distributions do this for you already.</p></div></div><h2><a id="_other_node_settings"></a>Other node settings<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/modules/node.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>More node settings can be found in <a class="link" href="modules.html" title="Modules">Modules</a>.  Of particular note are
the <a class="link" href="cluster.name.html" title="cluster.name"><code class="literal">cluster.name</code></a>, the <a class="link" href="node.name.html" title="node.name"><code class="literal">node.name</code></a> and the
<a class="link" href="modules-network.html" title="Network Settings">network settings</a>.</p></div><div class="navfooter"><span class="prev"><a href="modules-network.html">
              « 
              Network Settings</a>
           
        </span><span class="next">
           
          <a href="modules-plugins.html">Plugins
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
