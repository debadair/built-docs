<!DOCTYPE html>
<html lang="en-us">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>More like this query
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="specialized-queries.html" title="Specialized queries" /><link rel="prev" href="query-dsl-distance-feature-query.html" title="Distance feature query" /><link rel="next" href="query-dsl-percolate-query.html" title="Percolate query" /><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/master" /><meta name="DC.subject" content="Elasticsearch" /><meta name="DC.identifier" content="master" />
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ffffff">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd" />
    <meta name="yandex-verification" content="d8a47e95d0972434" />
    <!-- DC tags section -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" >
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/" >
    
    <!-- end DC tags -->
    <meta name="description" content="" />
    <meta name="localized" content="true" />
    <meta property="og:image" content="https://www.elastic.co/static/images/elastic-logo-200.png" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <!-- For third-generation iPad with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="/favicon_64x64_16bit.png">
    <!-- For iPhone with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="/favicon_32x32.png">
    <!-- For first- and second-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="/favicon_16x16.png">
    <!-- css -->
    <link href="/static/css/main.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
      // -------------------- set language based on browser language --------------------
      var lang = '/'+(navigator.language || navigator.userLanguage).slice(0,2)+'/',
      locales = {
        '/en':'/',
        '/de/': '/de/',
        '/fr/': '/fr/',
        '/ja/':'/jp/',
        '/ko/':'/kr/',
        '/zh/':'/cn/',
        '/es/': '/es/'
      },
      localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}',
      currentlocale = JSON.parse(localeUrl).relative_url_prefix;

      if($.cookie("is_lang_detected") == undefined){
        if(locales[lang] != undefined && locales[lang] != currentlocale){
          locale_lang_url = locales[lang] + window.location.pathname.slice(1,window.location.pathname.length);
          $.cookie("is_lang_detected",true ,{ path: '/'});
          window.location = locale_lang_url;
        }
      }
            
      // --------------------- end of set language based on browser language -----------------
    </script>
    <link type="text/css" rel="stylesheet" href="/static/css/guide.css" />
  
<link rel="stylesheet" type="text/css" href="styles.css" />

</head>

  <body>
    <!-- Google Tag Manager -->
    <script>dataLayer = [];</script><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-58RLH5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-58RLH5');</script>
    <!-- End Google Tag Manager -->
    
    <!-- new ga for staging server -->
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>
    <!-- new ga for staging server -->

    <!-- Elastic APM -->
    <!--
    <script src="https://www.elastic.co/static/js/elastic-apm-js-base.umd.min.2.2.0.js"></script>
    <script type="text/javascript">
      var elasticApm = init({
        serviceName: 'elastic-co-frontend',
        serverUrl: 'https://3ddd1ee09cc242c4b169d36f5a2b8b77.apm.us-west1.gcp.cloud.es.io:443',
        stackTraceLimit: 5,
        serviceVersion: '1.0.0'
      })
    
      var pageLoadName
      var pathname = window.location.pathname.replace(/\/es|\/pt|\/jp|\/pt|\/fr|\/kr|\/cn|\/de/g, '')
      var parts = pathname.split('/');
    
      if (parts.length && parts[1] === 'blog') {
        if (parts.length === 2) {
          pageLoadName =  '/blog';
        }
        else if (parts[2] === 'category') {
          pageLoadName =  '/blog/category';
        }
        else if (parts[2] === 'archive') {
          pageLoadName =  '/blog/archive';
        }
        else {
          pageLoadName =  '/blog/detail';
        }
      }
      else if (parts.length && parts[1] === 'elasticon') {
        if (parts.length === 2) {
          pageLoadName =  '/elasticon';
        }
        else if (parts.length === 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/overview';
        }
        else if (parts.length > 5 && (parts[2] === 'conf' || parts[2] === 'tour')) {
          pageLoadName =  '/elasticon/video';
        }
      }
      else if (parts.length && parts[1] === 'guide') {
        pageLoadName =  '/guide';
      }
      else if (parts.length === 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos';
      }
      else if (parts.length > 2 && parts[1] === 'videos') {
        pageLoadName =  '/videos/detail';
      }
      else if (parts.length > 2 && parts[1] === 'webinars') {
        pageLoadName =  '/webinars/detail';
      }
      else {
        pageLoadName =  window.location.pathname;
      }
    
      console.log('apm pageLoadName:', pageLoadName, parts)
      elasticApm.setTags({env:"production"});
      elasticApm.setInitialPageLoadName(pageLoadName);
    </script>
    -->

    <!-- Header Section -->
    
    <div id='elastic-nav'></div>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <link rel="stylesheet" type="text/css" href="/static/css/horizon-swiper.min.css">

    <style> 
      .m-shortcuts li a.m-search {
        background: url("/assets/blt7b9c4fe6528dc4ef/m-search-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-docs {
        background: url("/assets/blt44d8b7530a76d01c/m-guide-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}

      .m-shortcuts li a.m-contact {
        background: url("/assets/blt878040795c9d083b/m-contact-icon.png") no-repeat scroll center center rgba(0, 0, 0, 0);
        background-size: contain;}
    </style>

    <script type="text/javascript" src="/static/js/horizon-swiper.min.js"></script>

    <script type="text/javascript">
      $(document).ready( function(){
        // if($('#scrollable-pane li').length > 3){
          $('.horizon-swiper').horizonSwiper({
            showItems: 3,
            arrows: true
          }); 
        // }
        
        $('.navbar-toggle').on('click', function(){
          $('.mobile-navigation, .menu-open').hide();
          $('.navigation-wrapper').addClass('mobile-navigation');
          $('.navbar').addClass('menu-open');
          $('.menu-close').show();
        });
        $('.menu-close').on('click', function(){
          $('.navigation-wrapper').removeClass('mobile-navigation');
          $('.navbar').removeClass('menu-open');
          $('.menu-close').hide();
        });
    
        var active_url = "";
    
        $(".navbar-mobile-header-icon").click(function(index){
          $('.navigation-wrapper').toggleClass('menu-overlay');
          $(this).toggleClass("navbar-mobile-header-icon-click navbar-mobile-header-icon-out");
          $(".mobile-inner-nav").slideToggle(500);
          $(".mobile-inner-nav .navbar-nav a").each(function( index ) {
            $(this).css({'animation-delay': (index/25)+'0.4s'});
          });
        });
    
        $('.dropdown-btn').on('click', function(e){
          e.preventDefault();
          setDropdown();
        });
        
        function setDropdown() {
          $('#myDropdown').slideToggle();
        }
    
        $('body').on('click', function(event){
          if (!event.target.matches('.dropdown-btn')) {
    
            var dropdowns = $(".dropdown-content");
            var i;
            for (i = 0; i < dropdowns.length; i++) {
              var openDropdown = dropdowns[i];
              if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
              }
            }
          }
        });
    
      });
      $(window).resize(function () {
        $('.horizon-swiper').horizonSwiper({
          showItems: 3,
          arrows: true
        });
      });
    </script>

    <div class="main-container">
      <section id="content" >
        <div class="content-wrapper">   

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <!-- start body -->
                
            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
            <!-- start body -->
<div class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> » <span class="breadcrumb-link"><a href="specialized-queries.html">Specialized queries</a></span> » <span class="breadcrumb-node">More like this query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-distance-feature-query.html">
              « 
              Distance feature query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-percolate-query.html">Percolate query
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-mlt-query"></a>More like this query<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Returns documents like a provided text or set of documents.</p><p>The <code class="literal">more_like_this</code> (MLT) query selects a set of representative terms from a
provided input text or documents. It then forms a query using these terms,
executes the query, and returns the results. In addition to the input, you can
control how these terms are selected and how the query is formed. See
<a class="xref" href="query-dsl-mlt-query.html#mlt-query-how-works" title="How the MLT query works">How the MLT query works</a> for a detailed description of this process.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mlt-query-ex-requests"></a>Example requests<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-ex-provided-text"></a>Find documents like a provided text<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The following search returns documents with values similar to <code class="literal">Once upon a
time</code> in the <code class="literal">title</code> and <code class="literal">description</code> fields, limiting the number of selected
terms to <code class="literal">12</code>.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">GET /_search
{
    "query": {
        "more_like_this" : {
            "fields" : ["title", "description"],
            "like" : "Once upon a time",
            "min_term_freq" : 1,
            "max_query_terms" : 12
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/428.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-ex-provided-docs"></a>Find documents like other documents<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The following search returns documents similar to a provided text and other
existing documents.</p><p>You can provide input documents using the <a class="link" href="docs-multi-get.html" title="Multi Get API">Multi GET API</a>
syntax.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">GET /_search
{
    "query": {
        "more_like_this" : {
            "fields" : ["title", "description"],
            "like" : [
            {
                "_index" : "imdb",
                "_id" : "1"
            },
            {
                "_index" : "imdb",
                "_id" : "2"
            },
            "and potentially some more text here as well"
            ],
            "min_term_freq" : 1,
            "max_query_terms" : 12
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/429.console"></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-ex-artificial-docs"></a>Find documents like an artificial document<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>The following query returns documents similar to documents in another index and
an <a class="link" href="docs-termvectors.html#docs-termvectors-artificial-doc" title="Example: Artificial documents">artificial document</a> not present in that
index.</p><p>You can provide artificial documents using the
<a class="link" href="docs-termvectors.html#docs-termvectors-artificial-doc" title="Example: Artificial documents">artificial documents</a> syntax.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">GET /_search
{
    "query": {
        "more_like_this" : {
            "fields" : ["name.first", "name.last"],
            "like" : [
            {
                "_index" : "marvel",
                "doc" : {
                    "name": {
                        "first": "Ben",
                        "last": "Grimm"
                    },
                    "_doc": "You got no idea what I'd... what I'd give to be invisible."
                  }
            },
            {
                "_index" : "marvel",
                "_id" : "2"
            }
            ],
            "min_term_freq" : 1,
            "max_query_terms" : 12
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/430.console"></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mlt-top-level-params"></a>Top-level parameters for <code class="literal">more_like_this</code><a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>The MLT query has the following parameter types:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="query-dsl-mlt-query.html#mlt-query-document-input-params" title="Document input parameters">Document input parameters</a></li><li class="listitem"><a class="link" href="query-dsl-mlt-query.html#mlt-query-term-selection" title="Term selection parameters">Term selection parameters</a></li><li class="listitem"><a class="link" href="query-dsl-mlt-query.html#mlt-query-formation-params" title="Query formation parameters">Query formation parameters</a></li></ul></div><p>Only the <a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a> parameter is required. All other
parameters have sensible defaults.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-document-input-params"></a>Document input parameters<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="variablelist"><a id="mlt-query-like-param"></a><dl class="variablelist"><dt><span class="term"><code class="literal">like</code></span></dt><dd><p class="simpara">(Required, string or array of <a class="link" href="docs-multi-get.html" title="Multi Get API">document objects</a> and strings)
Free-form text or array of documents and text used to find similar documents.</p><p class="simpara">Free-form text is analyzed using the <a class="link" href="query-dsl-mlt-query.html#mlt-query-fields-param"><code class="literal">fields</code></a>
analyzer. To override the analyzer, use a syntax similar to the
<code class="literal">per_field_analyzer</code> parameter of the <a class="link" href="docs-termvectors.html#docs-termvectors-per-field-analyzer" title="Per-field analyzer">Term
vectors API</a>.</p><p class="simpara">To provide a document, use the <a class="link" href="docs-multi-get.html" title="Multi Get API">Multi GET API</a> syntax. When
specifying documents, values are fetched from the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-fields-param"><code class="literal">fields</code></a> parameter unless overridden in each document
request.</p><p class="simpara">Documents provided in this parameter must meet one of the following field
mapping requirements:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">The <a class="link" href="mapping-source-field.html" title="_source field"><code class="literal">_source</code></a> field is enabled.</li><li class="listitem">The <a class="link" href="mapping-store.html" title="store"><code class="literal">store</code></a> mapping parameter value is <code class="literal">true</code>.</li><li class="listitem">The <a class="link" href="term-vector.html" title="term_vector"><code class="literal">term_vector</code></a> mapping parameter value is <span class="strong strong"><strong>not</strong></span> <code class="literal">no</code>.</li></ul></div><p class="simpara">To provide artificial documents not present in an index, use the
<a class="link" href="docs-termvectors.html#docs-termvectors-artificial-doc" title="Example: Artificial documents">artificial documents</a> syntax. See
<a class="xref" href="query-dsl-mlt-query.html#mlt-query-ex-artificial-docs" title="Find documents like an artificial document">Find documents like an artificial document</a> for an example.</p></dd></dl></div><div class="variablelist"><a id="mlt-query-fields-param"></a><dl class="variablelist"><dt><span class="term"><code class="literal">fields</code></span></dt><dd>(Optional, array of strings) <a class="link" href="keyword.html" title="Keyword datatype"><code class="literal">keyword</code></a> or <a class="link" href="text.html" title="Text datatype"><code class="literal">text</code></a> fields
from which to fetch and analyze text.</dd><dt><span class="term"><code class="literal">unlike</code></span></dt><dd><p class="simpara">(Optional, string or array of <a class="link" href="docs-multi-get.html" title="Multi Get API">document objects</a> and strings)
Free-form text or array of documents and text used with the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a> parameter to exclude select terms.</p><p class="simpara">For example, you can search for documents <code class="literal">like: "apple"</code> but <code class="literal">unlike: "cake
crumble tree"</code>. The syntax is the same as the <a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a>
parameter.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-term-selection"></a>Term selection parameters<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="variablelist"><a id="mlt-query-analyzer-param"></a><dl class="variablelist"><dt><span class="term"><code class="literal">analyzer</code></span></dt><dd>(Optional, string) <a class="link" href="analysis-analyzers.html" title="Analyzers">Analyzer</a> used to free-form text in the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a> parameter. Defaults to the analyzer of the first
field in the <a class="link" href="query-dsl-mlt-query.html#mlt-query-fields-param"><code class="literal">fields</code></a> parameter value.</dd><dt><span class="term"><code class="literal">max_doc_freq</code></span></dt><dd><p class="simpara">(Optional, integer) Maximum document frequency above which terms are ignored
from the <a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a>  parameter value. Defaults to <code class="literal">0</code>
(unbounded).</p><p class="simpara">You can use this parameter to ignore highly frequent words, such as stop words.</p></dd><dt><span class="term"><code class="literal">max_query_terms</code></span></dt><dd><p class="simpara">(Optional, integer) Maximum number of query terms selected from the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a> parameter value. Defaults to <code class="literal">25</code>.</p><p class="simpara">Increasing this value provides greater accuracy but decreases query execution
speed.</p></dd><dt><span class="term"><code class="literal">max_word_length</code></span></dt><dd><p class="simpara">(Optional, integer) Maximum word length above which terms are
ignored. Defaults to <code class="literal">0</code> (unbounded).</p><p class="simpara">This parameter replaces the <code class="literal">max_word_len</code> parameter, which is deprecated.</p></dd><dt><span class="term"><code class="literal">min_doc_freq</code></span></dt><dd>(Optional, integer) Minimum document frequency below which terms are ignored
from the <a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a>  parameter value. Defaults to <code class="literal">5</code>.</dd><dt><span class="term"><code class="literal">min_term_freq</code></span></dt><dd>(Optional, integer) Minimum term frequency below which terms are ignored from
the <code class="literal">like</code> parameter value. Defaults to <code class="literal">2</code>.</dd><dt><span class="term"><code class="literal">min_word_length</code></span></dt><dd><p class="simpara">(Optional, integer) Minimum word length below which terms are ignored from the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-like-param"><code class="literal">like</code></a> parameter value. Defaults to <code class="literal">0</code>.</p><p class="simpara">This parameter replaces the <code class="literal">min_word_len</code> parameter, which is deprecated.</p></dd><dt><span class="term"><code class="literal">stop_words</code></span></dt><dd><p class="simpara">(Optional, array of strings) Set of stop words. Any word in this array is
ignored.</p><p class="simpara">If the <a class="link" href="query-dsl-mlt-query.html#mlt-query-analyzer-param">analyzer</a> allows stop words, you can use this
parameter to explicitly ignore them.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-formation-params"></a>Query formation parameters<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">boost</code></span></dt><dd><p class="simpara">(Optional, float) Floating point number used to decrease or increase the
<a class="link" href="query-filter-context.html" title="Query and filter context">relevance scores</a> of returned documents for the MLT
query. Defaults to <code class="literal">1.0</code>.</p><p class="simpara">You can use the <code class="literal">boost</code> parameter to adjust relevance scores for searches
containing two or more queries.</p><p class="simpara">Boost values are relative to the default value of <code class="literal">1.0</code>. A boost value between
<code class="literal">0</code> and <code class="literal">1.0</code> decreases the relevance score. A value greater than <code class="literal">1.0</code>
increases the relevance score.</p></dd><dt><span class="term"><code class="literal">boost_terms</code></span></dt><dd><p class="simpara">(Optional, float) Each term in the formed query could be further boosted by
their <a class="ulink" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf" target="_top">tf-idf</a> score. This floating
point number sets the boost factor to use for this feature. Defaults to
<code class="literal">0</code> (deactivated).</p><p class="simpara">Any other positive value boosts terms using the provided boost factor.</p></dd><dt><span class="term"><code class="literal">fail_on_unsupported_field</code></span></dt><dd><p class="simpara">(Optional, boolean) Indicates whether Elasticsearch returns an error if the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-fields-param"><code class="literal">fields</code></a> parameter contains a field type other than
<code class="literal">keyword</code> or <code class="literal">text</code>. Defaults to <code class="literal">true</code>.</p><p class="simpara">If <code class="literal">false</code>, Elasticsearch ignores unsupported field types in the
<a class="link" href="query-dsl-mlt-query.html#mlt-query-fields-param"><code class="literal">fields</code></a> parameter instead of returning an error.
This means Elasticsearch could return no documents.</p></dd><dt><span class="term"><code class="literal">include</code></span></dt><dd>(Optional, boolean)
Specifies whether the input documents should also be included in the search
results returned. Defaults to <code class="literal">false</code>.</dd><dt><span class="term"><code class="literal">minimum_should_match</code></span></dt><dd><p class="simpara">(Optional, string) Number of terms that must match the query after the
final query is formed. Defaults to <code class="literal">30%</code>.</p><p class="simpara">See <a class="link" href="query-dsl-minimum-should-match.html" title="minimum_should_match parameter"><code class="literal">minimum_should_match</code> parameter</a> for
syntax and more information.</p></dd></dl></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="mlt-query-notes"></a>Notes<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="mlt-query-how-works"></a>How the MLT query works<a href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/mlt-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4></div></div></div><p>Suppose we wanted to find all documents similar to a given input document.
Obviously, the input document itself should be its best match for that type of
query. And the reason would be mostly, according to
<a class="ulink" href="https://lucene.apache.org/core/4_9_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html" target="_top">Lucene scoring formula</a>,
due to the terms with the highest tf-idf. Therefore, the terms of the input
document that have the highest tf-idf are good representatives of that
document, and could be used within a disjunctive query (or <code class="literal">OR</code>) to retrieve similar
documents. The MLT query simply extracts the text from the input document,
analyzes it, usually using the same analyzer at the field, then selects the
top K terms with highest tf-idf to form a disjunctive query of these terms.</p><div class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p>The fields on which to perform MLT must be indexed and of type
<code class="literal">text</code> or <code class="literal">keyword`</code>. Additionally, when using <code class="literal">like</code> with documents, either
<code class="literal">_source</code> must be enabled or the fields must be <code class="literal">stored</code> or store
<code class="literal">term_vector</code>. In order to speed up analysis, it could help to store term
vectors at index time.</p></div></div><p>For example, if we wish to perform MLT on the "title" and "tags.raw" fields,
we can explicitly store their <code class="literal">term_vector</code> at index time. We can still
perform MLT on the "description" and "tags" fields, as <code class="literal">_source</code> is enabled by
default, but there will be no speed up on analysis for these fields.</p><div class="pre_wrapper"><pre class="programlisting prettyprint lang-console">PUT /imdb
{
    "mappings": {
        "properties": {
            "title": {
                "type": "text",
                "term_vector": "yes"
            },
            "description": {
                "type": "text"
            },
            "tags": {
                "type": "text",
                "fields" : {
                    "raw": {
                        "type" : "text",
                        "analyzer": "keyword",
                        "term_vector" : "yes"
                    }
                }
            }
        }
    }
}</pre></div><div class="console_widget" data-snippet="snippets/431.console"></div></div></div></div><div class="navfooter"><span class="prev"><a href="query-dsl-distance-feature-query.html">
              « 
              Distance feature query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-percolate-query.html">Percolate query
               »
            </a></span></div>
<!-- end body -->

            </div>
            <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
        
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Getting Started Videos</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/webinars/getting-started-elasticsearch?baymax=default&elektra=docs&storm=top-video">Starting Elasticsearch</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&elektra=docs&storm=top-video">Introduction to Kibana</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/getting-started-logstash?baymax=default&elektra=docs&storm=top-video">Logstash Starter Guide</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id='elastic-footer'</div>
<!-- Footer Section end-->

<script src='https://www.elastic.co/elastic-nav.js'></script>
<script src='https://www.elastic.co/elastic-footer.js'></script>

<style type="text/css">
	
        
            .Facebook a {background:url("/assets/bltf546ff2e0a8f2de5/facebook.svg") no-repeat;}
            .Facebook a:before {
                content: url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Facebook a:hover {background:url("/assets/bltc24cf11c714ecfc4/facebook-hover.svg")}		
        
	
        
            .Twitter a {background:url("/assets/bltdd9556d6b24e2b85/twitter.svg") no-repeat;}
            .Twitter a:before {
                content: url("/assets/blt90b0372cc07a54d3/twitter-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Twitter a:hover {background:url("/assets/blt90b0372cc07a54d3/twitter-hover.svg")}		
        
	
        
            .LinkedIn a {background:url("/assets/bltc4a77e0f52ce07f1/linkedin.svg") no-repeat;}
            .LinkedIn a:before {
                content: url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .LinkedIn a:hover {background:url("/assets/blt01ce654380e4ea6c/linkedin-hover.svg")}		
        
	
        
            .Xing a {background:url("/assets/bltc6347078dcc9ec76/xing.svg") no-repeat;}
            .Xing a:before {
                content: url("/assets/bltededebe5f7521a39/xing-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .Xing a:hover {background:url("/assets/bltededebe5f7521a39/xing-hover.svg")}		
        
	
        
            .YouTube a {background:url("/assets/blt4982061ce1aebc7f/youtube.svg") no-repeat;}
            .YouTube a:before {
                content: url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg");
                width:0;
                height:0;
                visibility:hidden;
            }
        
        
            .YouTube a:hover {background:url("/assets/bltddeb6c6404ae81a5/youtube-hover.svg")}		
        
	
</style>

<script src="//app-lon02.marketo.com/js/forms2/js/forms2.min.js"></script>
<script>
$(document).ready(function(){

    var ipSuccess = function(data) {
        country = data.country_code;
        if (data.in_eu){
                        
            marketo_id = "6196";
            
        }else{ 
            marketo_id = "1398";

        }

        $('.subscribe-form form.sb-form').attr('id', 'mktoForm_' + marketo_id);
        if(window.MktoForms2){
            MktoForms2.loadForm("//app-lon02.marketo.com", "813-MAM-392", marketo_id,function(form){
                form.onSuccess(function(form){
                    $('#mktoForm_'+marketo_id).css('display','none');
                    $('.subscribe-wrapper .subscribe-form-container').hide();
                    $('.subscribe-wrapper').find('.form_thanks').removeClass('hide')
                    dataLayer.push({'event': 'mktoFormSubmit'});
                    return false;
                });
            });  
        }
    }

    var marketo_id;

    $.ajax({
        url: "/gdpr-data"
    }).success(function(data) {
        ipSuccess(data);
    });

})
</script>

      </section>
    </div>

    
     <script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="/static/js/swiftype_app_search.umd.min.js"></script>
<script src="/static/js/jquery.autocomplete.js"></script>
<script type="text/javascript" src="/static/js/slick.min.js"></script>
<script src="/static/js/nav-v5.js"></script>
<script src="/static/js/script.js"></script>
 
     
<script type="text/javascript">
$(document).ready(function(){
	if (window.location.hash.length) {
	      var target = $(window.location.hash);
	      target = target.length ? target : $(window.location.hash);
	      if (target.length) {
	        setTimeout(function(){ $(window).scrollTop(target.offset().top - 60); }, 1200);        
	      }
	}
	$('#guide').on('click','a[href*=#]:not([href=#])',function(e) {
			var flag=true;
		      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
		          var target = $(this.hash);
		          target = target.length ? target :$(this.hash);
		          if (target.length) {
		            if(flag){
		              flag=false;
		              var heightScroll=($('.tertiary-nav.navbar-fixed-top').height())?60:110;
		              $('html,body').animate({
		                  scrollTop: target.offset().top - heightScroll
		                }, 2000, function(){
		                  flag=true;
		                });
		            }                    
		          }
		      }
		    
	});

})

</script>

     <style></style>
     
  
            <script type="text/javascript" src="docs.js"></script>
<script type='text/javascript' src='https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=yaml'></script>

            </body>
        
</html>
